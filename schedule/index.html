<!DOCTYPE html>
<html>
<head>
    <title>Schedule</title>
	<script>
	
function e(e=new Date){const i=new Date(e);const t=i.getDay();const l=t===0?-6:1-t;i.setDate(i.getDate()+l);i.setHours(0,0,0,0);return i.getTime()}function t(e,i){const t=new Date(e*1e3);t.setHours(0,0,0,0);const l=new Date(e*1e3);l.setHours(23,59,0,0);const n=new Date(i*1e3);if(n<t)return t.getTime()/1e3;if(n>l)return l.getTime()/1e3;return n.getTime()/1e3}function i(){fetch(s).then(e=>e.json()).then(e=>{b=JSON.parse(e.content);c()})}function l(){fetch(s,{method:"PATCH",headers:{"content-type":"application/json"},body:JSON.stringify({content:JSON.stringify(b)})})}function f(e,i,t,l,n){if(e[0]>i&&e[0]<i+l){if(e[1]>t&&e[1]<t+n){return true}}}let n;let r;let o;const u=new URLSearchParams(window.location.search);var d=u.get("key");if(d===null){d=window.prompt("Enter key")}let a=atob(d).split(",");const s="https://discord.com/api/v10/webhooks/"+a[0]+"/"+a[3]+"/messages/"+a[5];let b=[];let m={menus:[0,0],week:e()/1e3,initialWeek:e()/1e3,selected:[0,0,0],builder:[0,0]};window.onload=()=>{n=document.getElementById("image");r=document.getElementById("canvas");o=r.getContext("2d");i();r.onclick=e=>{let a=[e.offsetX,e.offsetY];if(f(a,930,9,15,17)){if(m.week>m.initialWeek){m.week-=7*86400}}if(f(a,954,9,15,17)){if(m.week<m.initialWeek+2*7*86400){m.week+=7*86400}}let i=b.filter(e=>e[0]>m.week&&e[0]<m.week+7*86400);i.forEach(e=>{let i=new Date(1e3*e[0]);let t=i.getHours()+i.getMinutes()/60;let l=Math.max(Math.min(35+31*t,779),36)+1;let n=i.getDay();if(n===0){n=6}else{n-=1}let r=new Date(1e3*e[1]);let u=r.getHours()+r.getMinutes()/60;let d=Math.max(Math.min(35+31*u,779),36)+1;if(f(a,3+105*n,l,100,d-l)){m.menus[0]=1;m.selected=[e[0],e[1],e[2]]}});if(f(a,888,691,80,80)){m.menus[1]=1;m.builder[0]=Math.ceil(Date.now()/(15*60*1e3))*(15*60*1e3)/1e3;m.builder[1]=t(m.builder[0],m.builder[0]+1800)}if(m.menus[0]===1){if(f(a,950,35,28,28)){m.menus[0]=0}if(f(a,950,65,28,28)&&m.selected[2]===0){b=b.filter(e=>e[0]!==m.selected[0]);l();m.menus[0]=0}}if(m.menus[1]===1){if(f(a,950,139,28,28)){m.menus[1]=0}if(f(a,821,224,17,15)){m.builder[0]=t(m.builder[0],m.builder[0]+3600);m.builder[1]=t(m.builder[0],Math.max(m.builder[1],m.builder[0]+1800))}if(f(a,821,248,17,15)){m.builder[0]=t(m.builder[0],m.builder[0]-3600);m.builder[1]=t(m.builder[0],Math.max(m.builder[1],m.builder[0]+1800))}if(f(a,953,224,17,15)){m.builder[0]=t(m.builder[0],m.builder[0]+60);m.builder[1]=t(m.builder[0],Math.max(m.builder[1],m.builder[0]+1800))}if(f(a,953,248,17,15)){m.builder[0]=t(m.builder[0],m.builder[0]-60);m.builder[1]=t(m.builder[0],Math.max(m.builder[1],m.builder[0]+1800))}if(f(a,821,291,17,15)){m.builder[1]=t(m.builder[1],m.builder[1]+3600);m.builder[1]=t(m.builder[0],Math.max(m.builder[1],m.builder[0]+1800))}if(f(a,821,315,17,15)){m.builder[1]=t(m.builder[1],m.builder[1]-3600);m.builder[1]=t(m.builder[0],Math.max(m.builder[1],m.builder[0]+1800))}if(f(a,953,291,17,15)){m.builder[1]=t(m.builder[1],m.builder[1]+60);m.builder[1]=t(m.builder[0],Math.max(m.builder[1],m.builder[0]+1800))}if(f(a,953,315,17,15)){m.builder[1]=t(m.builder[1],m.builder[1]-60);m.builder[1]=t(m.builder[0],Math.max(m.builder[1],m.builder[0]+1800))}if(f(a,887,169,17,15)){if(m.builder[0]<m.initialWeek+20*86400){m.builder[0]+=86400;m.builder[1]+=86400}}if(f(a,887,193,17,15)){if(m.builder[0]>m.initialWeek+86400){m.builder[0]-=86400;m.builder[1]-=86400}}if(f(a,746,336,42,27)){b.push([m.builder[0],m.builder[1],0]);m.menus[1]=0;l()}}c()};c()};function c(){b.sort((e,i)=>e[2]-i[2]);o.clearRect(0,0,980,783);o.drawImage(n,0,0);o.fillStyle="#d8d8d8";if(m.menus[0]===0){o.fillRect(736,35,242,102)}if(m.menus[1]===0){o.fillRect(736,139,242,542)}if(m.menus[0]===0&&m.menus[1]===0){o.fillRect(736,137,242,2)}let e=b.filter(e=>e[0]>m.week&&e[0]<m.week+7*86400);e.forEach(e=>{let i=new Date(1e3*e[0]);let t=i.getHours()+i.getMinutes()/60;let l=Math.max(Math.min(35+31*t,779),36)+1;let n=i.getDay();if(n===0){n=6}else{n-=1}let r=new Date(1e3*e[1]);let u=r.getHours()+r.getMinutes()/60;let d=Math.max(Math.min(35+31*u,779),36)+1;if(e[2]===0){o.fillStyle="#FFFFFF"}if(e[2]===1){o.fillStyle="#0000FF"}o.fillRect(3+105*n,l,100,d-l);o.fillStyle="#000000";if(e[2]===1){o.fillStyle="#FFFFFF"}o.font="9.6px Arial";o.textBaseline="top";let a=i.toLocaleTimeString(undefined,{hour:"numeric",minute:"numeric"})+" âž” "+r.toLocaleTimeString(undefined,{hour:"numeric",minute:"numeric"});o.fillText(a,3+2+105*n,l+2)});o.textBaseline="alphabetic";let i=new Date(1e3*m.week).toLocaleDateString(undefined,{day:"2-digit",month:"short",year:"numeric"});o.fillStyle="#7F7F7F";o.font="30px Arial";o.fillText(i,744,29);if(m.menus[0]===1){let e=new Date(1e3*m.selected[0]);let i=new Date(1e3*m.selected[1]);if(m.selected[2]===1){o.fillStyle="#D8D8D8";o.fillRect(948,65,30,30);o.fillStyle="#0000FF";o.fillText("BEAM",744,67)}if(m.selected[2]===0){o.fillStyle="#7F7F7F";o.fillText("AVAILABLE",744,67)}o.font="24px Arial";o.fillStyle="#7F7F7F";o.fillText(i.toLocaleTimeString(undefined,{hour:"numeric",minute:"numeric"}),871,126);o.textAlign="right";o.fillText(e.toLocaleTimeString(undefined,{hour:"numeric",minute:"numeric"}),839,126);o.textAlign="center";o.fillText(e.toLocaleDateString(undefined,{day:"2-digit",month:"short",weekday:"short"}),853,98);o.textAlign="start"}if(m.menus[1]===1){let e=new Date(1e3*m.builder[0]);let i=new Date(1e3*m.builder[1]);o.font="24px Arial";o.textAlign="right";o.fillStyle="#7F7F7F";o.fillText(e.toLocaleDateString(undefined,{day:"2-digit",month:"short",weekday:"short"}),876,196);o.textAlign="center";o.fillText(e.toLocaleTimeString(undefined,{hour:"numeric",minute:"numeric"}),896,250);o.fillText(i.toLocaleTimeString(undefined,{hour:"numeric",minute:"numeric"}),896,317);o.textAlign="start"}}
	</script>
</head>
<body>
    <canvas id="canvas" width="980" height="783"></canvas>
	<img id="image" src="image-8.png" style="display:none"><img>
</body>

</html>
