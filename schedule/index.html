<!DOCTYPE html>
<html>
<head>
    <title>Schedule</title>
    <script>
function e(e=new Date){const t=new Date(e);const i=t.getDay();const n=i===0?-6:1-i;t.setDate(t.getDate()+n);t.setHours(0,0,0,0);return t.getTime()}function t(e,t){const i=new Date(t*1e3);i.setHours(0,0,0,0);const n=new Date(t*1e3);n.setHours(23,59,59,999);const l=new Date(e*1e3);if(l<i)return i.getTime()/1e3;if(l>n)return n.getTime()/1e3;return l.getTime()/1e3}function a(e,t,i,n,l){return e[0]>t&&e[0]<t+n&&e[1]>i&&e[1]<i+l}function i(){fetch(d).then(e=>e.json()).then(e=>{g=JSON.parse(e.content);h()})}function s(){fetch(d,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:JSON.stringify(g)})})}function n(e){let o=new Date(e[0]*1e3);let u=new Date(e[1]*1e3);let a=e[2]===1?"#0000FF":"#FFFFFF";let s=e[2]===1?"#FFFFFF":"#000000";let c=new Date(o.getFullYear(),o.getMonth(),o.getDate());while(c<=u){let e=c.getDay()===0?6:c.getDay()-1;let t=c.toDateString()===o.toDateString()?35+(o.getHours()+o.getMinutes()/60)*31:36;let i=c.toDateString()===u.toDateString()?35+(u.getHours()+u.getMinutes()/60)*31:779;t=Math.max(Math.min(t,779),36)+1;i=Math.max(Math.min(i,779),36)+1;f.fillStyle=a;f.fillRect(3+105*e,t,100,i-t);f.fillStyle=s;f.font="9.6px Arial";f.textBaseline="top";f.textAlign="start";let n=c.toDateString()===o.toDateString()?o:new Date(c.getFullYear(),c.getMonth(),c.getDate(),0,0);let l=c.toDateString()===u.toDateString()?u:new Date(c.getFullYear(),c.getMonth(),c.getDate(),23,59);let r=n.toLocaleTimeString(undefined,{hour:"numeric",minute:"numeric"})+" âž” "+l.toLocaleTimeString(undefined,{hour:"numeric",minute:"numeric"});f.fillText(r,3+2+105*e,t+2);c.setDate(c.getDate()+1)}}let l,r,f;const o=new URLSearchParams(window.location.search);let u=o.get("key")||window.prompt("Enter key");const c=atob(u).split(",");const d=`https://discord.com/api/v10/webhooks/${c[0]}/${c[3]}/messages/${c[5]}`;let g=[];let m={menus:[0,0],week:e()/1e3,initialWeek:e()/1e3,selected:[0,0,0],builder:[0,0]};window.onload=()=>{l=document.getElementById("image");r=document.getElementById("canvas");f=r.getContext("2d");i();r.onclick=b;h()};function b(e){const u=[e.offsetX,e.offsetY];if(a(u,930,9,15,17)&&m.week>m.initialWeek)m.week-=7*86400;if(a(u,954,9,15,17)&&m.week<m.initialWeek+2*7*86400)m.week+=7*86400;const t=g.filter(e=>e[0]>m.week&&e[0]<m.week+7*86400);t.forEach(e=>{const t=new Date(e[0]*1e3);const i=new Date(e[1]*1e3);let n=new Date(t.getFullYear(),t.getMonth(),t.getDate());while(n<=i){const l=n.getDay()===0?6:n.getDay()-1;const r=n.toDateString()===t.toDateString()?35+(t.getHours()+t.getMinutes()/60)*31:36;const o=n.toDateString()===i.toDateString()?35+(i.getHours()+i.getMinutes()/60)*31:779;if(a(u,3+105*l,r,100,o-r)){m.menus[0]=1;m.selected=[...e]}n.setDate(n.getDate()+1)}});if(a(u,888,691,80,80)){m.menus[1]=1;const i=15*60*1e3;if(m.week===m.initialWeek){const n=Math.ceil(Date.now()/i)*i;m.builder[0]=n/1e3}else{const l=m.week+12*3600;m.builder[0]=l}m.builder[1]=m.builder[0]+1800}D(u);h()}function D(e){if(m.menus[0]===1){if(a(e,950,35,28,28))m.menus[0]=0;if(a(e,950,65,28,28)&&m.selected[2]===0){const t=g.length;g=g.filter(e=>!(e[0]===m.selected[0]&&e[1]===m.selected[1]&&e[2]===m.selected[2]));if(g.length!==t)s();m.menus[0]=0}}if(m.menus[1]===1){const l=1800;const r=28800;const o=m.initialWeek;const u=m.initialWeek+21*86400-60;const i=(e,t)=>{const i=m.builder[1]-m.builder[0];if(e===0){m.builder[0]+=t;m.builder[1]+=t;if(m.builder[0]<o){const n=o-m.builder[0];m.builder[0]+=n;m.builder[1]+=n}if(m.builder[1]>u){const n=m.builder[1]-u;m.builder[0]-=n;m.builder[1]-=n}}if(e===1){m.builder[1]+=t;if(m.builder[1]<m.builder[0]+l)m.builder[1]=m.builder[0]+l;if(m.builder[1]>m.builder[0]+r)m.builder[1]=m.builder[0]+r;if(m.builder[1]>u)m.builder[1]=u}if(m.builder[0]<o)m.builder[0]=o;if(m.builder[1]>u)m.builder[1]=u;if(m.builder[1]-m.builder[0]<l)m.builder[1]=Math.min(m.builder[0]+l,u)};if(a(e,953,224,17,15))i(0,60);if(a(e,953,248,17,15))i(0,-60);if(a(e,821,224,17,15))i(0,3600);if(a(e,821,248,17,15))i(0,-3600);if(a(e,953,291,17,15))i(1,60);if(a(e,953,315,17,15))i(1,-60);if(a(e,821,291,17,15))i(1,3600);if(a(e,821,315,17,15))i(1,-3600);if(a(e,887,169,17,15)){const n=86400;if(m.builder[1]+n<=u){m.builder[0]+=n;m.builder[1]+=n}}if(a(e,887,193,17,15)){const n=86400;if(m.builder[0]-n>=o){m.builder[0]-=n;m.builder[1]-=n}}if(a(e,746,336,42,27)){g.push([m.builder[0],m.builder[1],0]);m.menus[1]=0;s()}if(a(e,950,139,28,28))m.menus[1]=0}}function h(){f.textAlign="start";f.textBaseline="alphabetic";g.sort((e,t)=>e[2]-t[2]);f.clearRect(0,0,980,783);f.drawImage(l,0,0);f.fillStyle="#d8d8d8";if(m.menus[0]===0)f.fillRect(736,35,242,102);if(m.menus[1]===0)f.fillRect(736,139,242,542);if(m.menus[0]===0&&m.menus[1]===0)f.fillRect(736,137,242,2);let e=g.filter(e=>e[0]>m.week&&e[0]<m.week+7*86400);e.forEach(n);let t=new Date(1e3*m.week).toLocaleDateString(undefined,{day:"2-digit",month:"short",year:"numeric"});f.fillStyle="#7F7F7F";f.font="30px Arial";f.textAlign="start";f.textBaseline="alphabetic";f.fillText(t,744,29);if(m.menus[0]===1){w()}if(m.menus[1]===1){S()}}function w(){f.textAlign="start";f.textBaseline="alphabetic";const[e,t,i]=m.selected;const n=new Date(1e3*e);const l=new Date(1e3*t);f.font="24px Arial";f.fillStyle="#7F7F7F";f.textAlign="center";f.fillText(n.toLocaleDateString(undefined,{day:"2-digit",month:"short",weekday:"short"}),853,98);f.textAlign="right";f.fillText(n.toLocaleTimeString(undefined,{hour:"numeric",minute:"numeric"}),839,126);f.textAlign="start";f.fillText(l.toLocaleTimeString(undefined,{hour:"numeric",minute:"numeric"}),871,126);f.fillStyle=i===1?"#0000FF":"#7F7F7F";f.fillText(i===1?"BEAM":"AVAILABLE",744,67);if(i===1){f.fillStyle="#d8d8d8";f.fillRect(948,65,30,30)}}function S(){f.textBaseline="alphabetic";const[e,t]=m.builder;const i=new Date(1e3*e);const n=new Date(1e3*t);f.font="24px Arial";f.textAlign="center";f.fillStyle="#7F7F7F";f.fillText(i.toLocaleTimeString(undefined,{hour:"numeric",minute:"numeric"}),896,250);f.fillText(n.toLocaleTimeString(undefined,{hour:"numeric",minute:"numeric"}),896,317);f.textAlign="right";f.fillText(i.toLocaleDateString(undefined,{day:"2-digit",month:"short",weekday:"short"}),876,196);f.textAlign="start"}
    </script>
</head>
<body>
    <canvas id="canvas" width="980" height="783"></canvas>
    <img id="image" src="image-8.png" style="display:none">
</body>
</html>
